<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EGroupware MCP Login</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="login-page">
        <div class="login-container">
            <div class="login-header">
                <div class="brand-logo">
                    <div class="logo-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="url(#gradient)"/>
                            <path d="M2 17L12 22L22 17" stroke="url(#gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="url(#gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#6366f1"/>
                                    <stop offset="100%" style="stop-color:#8b5cf6"/>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <h1>EGroupware</h1>
                        <p>MCP Assistant</p>
                    </div>
                </div>
                <p class="login-subtitle">Connect your EGroupware account to get started</p>
            </div>

            <form id="login-form" class="login-form">
                <div class="form-section">
                    <h3 class="section-title">EGroupware Connection</h3>

                    <div class="form-group">
                        <label for="egw-url">EGroupware URL</label>
                        <input type="url" id="egw-url" name="egw-url" required
                               placeholder="https://example.org/egroupware/groupdav.php/username">
                        <div class="input-hint">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Your EGroupware GroupDAV URL
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" required placeholder="your.username">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required placeholder="••••••••">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title">AI Configuration</h3>

                    <div class="form-group">
                        <label for="ai-model">AI Provider</label>
                        <select id="ai-model" name="ai-model" required>
                            <option value="">Select a provider...</option>
                            <option value="openai">OpenAI</option>
                            <option value="ionos">IONOS</option>
                            <option value="github">GitHub Models</option>
                            <option value="openrouter">OpenRouter</option>
                            <option value="anthropic">Anthropic</option>
                            <option value="azure">Azure OpenAI</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ai-key">API Key</label>
                        <input type="password" id="ai-key" name="ai-key" required placeholder="sk-...">
                        <div class="input-hint">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                                <circle cx="7" cy="16" r="2" fill="currentColor"/>
                                <path d="M7 12V8C7 5.23858 9.23858 3 12 3C14.7614 3 17 5.23858 17 8V12" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Your API key is stored securely
                        </div>
                    </div>

                    <div class="form-group base-url-group" style="display: none;">
                        <label for="base-url">API Base URL</label>
                        <input type="url" id="base-url" name="base-url" placeholder="https://api.example.com">
                        <div class="input-hint">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 13C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11C9.44772 11 9 11.4477 9 12C9 12.5523 9.44772 13 10 13Z" fill="currentColor"/>
                                <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Custom API endpoint URL
                        </div>
                    </div>
                </div>

                <div id="error-message" class="error-message"></div>

                <button type="submit" class="login-btn">
                    <span class="btn-text">Connect & Login</span>
                    <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <div class="login-footer">
                    <p class="security-note">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L3 7V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V7L12 2Z" fill="currentColor"/>
                            <path d="M9 12L11 14L15 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Your credentials are encrypted and never stored
                    </p>
                </div>
            </form>
        </div>
    </div>
    <script src="/static/script.js"></script>
</body>
</html>